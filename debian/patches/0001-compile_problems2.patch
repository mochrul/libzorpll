From: SZALAY Attila <sasa@debian.org>
Date: Fri, 20 Jan 2012 13:29:40 +0100
Subject: compile_problems2

===================================================================
---
 src/io.c          |    2 +-
 src/memtrace.c    |    2 +-
 src/socket.c      |    2 +-
 src/streamgzip.c  |    3 +--
 tests/test_blob.c |   10 +++++-----
 5 files changed, 9 insertions(+), 10 deletions(-)

diff --git a/src/io.c b/src/io.c
index dc461e7..9ec673f 100644
--- a/src/io.c
+++ b/src/io.c
@@ -201,7 +201,7 @@ void
 z_fd_set_our_tos(gint fd, guint8 tos)
 {
   socklen_t len;
-  cap_t saved_caps;
+  G_GNUC_UNUSED cap_t saved_caps;
   
   saved_caps = cap_save();
   len = sizeof(tos);
diff --git a/src/memtrace.c b/src/memtrace.c
index 811dcf7..2206b96 100644
--- a/src/memtrace.c
+++ b/src/memtrace.c
@@ -693,7 +693,7 @@ z_malloc(size_t size, gpointer backt[])
         {
           backtrace_info = temp_brk;
           temp_brk = 0;
-          assert(0);
+          assert(backtrace_info == 0);
         }
     }
   else
diff --git a/src/socket.c b/src/socket.c
index 8f0bd4b..8613f59 100644
--- a/src/socket.c
+++ b/src/socket.c
@@ -37,7 +37,7 @@
 GIOStatus
 z_bind(gint fd, ZSockAddr *addr, guint32 sock_flags)
 {
-  cap_t saved_caps;
+  G_GNUC_UNUSED cap_t saved_caps;
   GIOStatus rc;
   
   z_enter();
diff --git a/src/streamgzip.c b/src/streamgzip.c
index 2d1f999..2571cd7 100644
--- a/src/streamgzip.c
+++ b/src/streamgzip.c
@@ -685,7 +685,7 @@ z_stream_gzip_watch_prepare(ZStream *s, GSource *src G_GNUC_UNUSED, gint *timeou
 {
   ZStreamGzip *self = Z_CAST(s, ZStreamGzip);
   gboolean ret = FALSE;
-  gboolean child_readable, child_writeable, child_enable;
+  gboolean child_readable, child_enable;
 
   z_enter();
   
@@ -714,7 +714,6 @@ z_stream_gzip_watch_prepare(ZStream *s, GSource *src G_GNUC_UNUSED, gint *timeou
 
   if (s->want_write)
     {
-      child_writeable = !!(self->child_cond & G_IO_OUT);
       if (self->encode.avail_out == self->buffer_length)
         ret = TRUE;
     }
diff --git a/tests/test_blob.c b/tests/test_blob.c
index 1141b4d..2891969 100644
--- a/tests/test_blob.c
+++ b/tests/test_blob.c
@@ -232,9 +232,9 @@ main(void)
 {
   ZBlobSystem *blobsys;
   ZBlob *blob;
-  /*gchar *blobptr;*/
-  gsize blobptr_size;
-  const gchar *blobfile;
+  /*gchar *blobptr;
+  gsize blobptr_size; */
+  G_GNUC_UNUSED const gchar *blobfile;
 
   z_thread_init();
   /*verbose_level=9;*/
@@ -262,8 +262,8 @@ main(void)
     }
   else
     {
-      blobptr_size = 10;
-      /*blobptr = z_blob_get_ptr(blob, 0, &blobptr_size, -1);*/
+      /*blobptr_size = 10;
+      blobptr = z_blob_get_ptr(blob, 0, &blobptr_size, -1);*/
       blobfile = z_blob_get_file(blob, NULL, NULL, 0644, -1);
       /* Leave it allocated and locked, let's see what happens when the blobsys is destroyed */
     }
-- 
